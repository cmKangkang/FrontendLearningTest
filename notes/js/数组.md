# 数组

数组属于**内置对象**。

数组和普通对象的功能类似，用来存储值。**数组的存储性能比普通对象要好。在实际开发中我们经常使用数组来存储一些数据（尤其是列表数据）。

### 创建数组对象

1. 使用字面量创建数组。（创建一个空数组或带初始值的数组。）
2. 使用构造函数创建数组。(如果**参数为空**，则表示创建一个空数组；如果参数是**一个数值**时，表示数组的长度；如果有多个参数时，表示数组中的元素。)

## 数组方法清单

1. 数组的类型相关

   | 方法                             | 描述                               | 备注 |
   | -------------------------------- | ---------------------------------- | ---- |
   | Array.isArray()                  | 判断是否为数组                     |      |
   | toString()                       | 将数组转换为字符串                 |      |
   | Array.from(arrayLike)            | 将**伪数组**转化为**真数组**       |      |
   | Array.of(value1, value2, value3) | 创建数组：将**一系列值**转换成数组 |      |

   

2. 数组元素的添加和删除

   | 方法      | 描述                                                         | 备注           |
   | --------- | ------------------------------------------------------------ | -------------- |
   | push()    | 向数组的**最后面**插入一个或多个元素，返回结果为新数组的**长度** | 会改变原数组   |
   | pop()     | 删除数组中的**最后一个**元素，返回结果为**被删除的元素**     | 会改变原数组   |
   | unshift() | 在数组**最前面**插入一个或多个元素，返回结果为新数组的**长度** | 会改变原数组   |
   | shift()   | 删除数组中的**第一个**元素，返回结果为**被删除的元素**       | 会改变原数组   |
   |           |                                                              |                |
   | slice()   | 从数组中**提取**指定的一个或多个元素，返回结果为**新的数组** | 不会改变原数组 |
   | splice()  | 从数组中**删除**指定的一个或多个元素，返回结果为**被删除元素组成的新数组** | 会改变原数组   |
   |           |                                                              |                |
   | fill()    | 填充数组：用固定的值填充数组，返回结果为**新的数组**         | 不会改变原数组 |

3. 数组的合并拆分

   | 方法     | 描述                                                 | 备注             |
   | -------- | ---------------------------------------------------- | ---------------- |
   | concat() | 合并数组：连接两个或多个数组，返回结果为**新的数组** | 不会改变原数组   |
   | join()   | 将数组转换为字符串，返回结果为**转换后的字符串**     | 不会改变原数组   |
   | split()  | 将字符串按照指定的分隔符，组装为数组                 | 不会改变原字符串 |

4. 数组排序

   | 方法      | 描述                                                    | 备注         |
   | --------- | ------------------------------------------------------- | ------------ |
   | reverse() | 反转数组，返回结果为**反转后的数组**                    | 会改变原数组 |
   | sort()    | 对数组的元素,默认按照**Unicode 编码**，从小到大进行排序 | 会改变原数组 |

5. 查找数组的元素

   | 方法                  | 描述                                                         | 备注                                                     |
   | --------------------- | ------------------------------------------------------------ | -------------------------------------------------------- |
   | indexOf(value)        | 从前往后索引，检索一个数组中是否含有指定的元素               |                                                          |
   | lastIndexOf(value)    | 从后往前索引，检索一个数组中是否含有指定的元素               |                                                          |
   | includes(item)        | 数组中是否包含指定的内容                                     |                                                          |
   | find(function())      | 找出**第一个**满足「指定条件返回 true」的元素                |                                                          |
   | findIndex(function()) | 找出**第一个**满足「指定条件返回 true」的元素的 index        |                                                          |
   | every()               | 确保数组中的每个元素都满足「指定条件返回 true」，则停止遍历，此方法才返回 true | 全真才为真。要求每一项都返回 true，最终的结果才返回 true |
   | some()                | 数组中只要有一个元素满足「指定条件返回 true」，则停止遍历，此方法就返回 true | 一真即真。只要有一项返回 true，最终的结果就返回 true     |

6. 遍历数组

   |           |                                                              |                                                        |
   | --------- | ------------------------------------------------------------ | ------------------------------------------------------ |
   | 方法      | 描述                                                         | 备注                                                   |
   | for 循环  | 这个大家都懂                                                 |                                                        |
   | forEach() | 和 for 循环类似，但需要兼容 IE8 以上                         | forEach() 没有返回值。也就是说，它的返回值是 undefined |
   | map()     | 对原数组中的每一项进行加工，将组成新的数组                   | 不会改变原数组                                         |
   | filter()  | 过滤数组：返回结果是 true 的项，将组成新的数组，返回结果为**新的数组** | 不会改变原数组                                         |
   | reduce    | 接收一个函数作为累加器，返回值是回调函数累计处理的结果       |                                                        |

7. Array.isArray(arr):判断是否为数组

8. toString():数组转换为字符串（每一项用","分开）

9. Array.from():将伪数组转换为真数组.(伪数组：包含length属性的对象或可迭代的对象)

   ```js
   const name = 'qianguyihao';
   console.log(Array.from(name)); // 打印结果是数组：["q","i","a","n","g","u","y","i","h","a","o"]
   ```

10. Array.of()：创建数组

    ```js
    const arr = Array.of(1, 'abc', true);
    console.log(arr); // 打印结果是数组：[1, "abc", true]
    ```

11. 数组元素的添加和删除

    * push()
    * pop()
    * unshift()  在数组最前面插入一个或多个元素。
    * shift()  删除数组中的第一个元素，返回被删除的元素
    * slice()  从数组中提取指定的一个或多个元素，返回结果为新的数组（指定的元素组成的）。（不会改变原数组）
    * splice()  从数组中删除指定的一个或多个元素，返回结果为被删除的元素组成的新数组。（会改变原来的数组）。
    * fill()  用一个固定值填充数组，返回结果为**新的数组**。不会改变原数组。

12. sort()  排序

    * 如果在使用 sort() 方法时不带参，则默认按照**Unicode 编码**，从小到大进行排序。

    * 带参时，自定义排序规则。

      在sort()添加回调函数，指定排序规则。回调函数中需要定义两个形参，浏览器将会分别使用数组中的元素作为实参去调用回调函数。根据回调函数的返回值来决定元素的排序。

      * 返回值>0，则元素交换位置。
      * 返回值<0，元素位置不变。
      * 返回值=0，认为两个元素相等，不交换位置。

      ```js
      let arr = [5, 2, 11, 3, 4, 1];
      
      // 自定义排序规则
      let result = arr.sort((a, b)=> a - b;
          // return b - a; // 降序排列
      );
      
      console.log('arr =' + JSON.stringify(arr));
      console.log('result =' + JSON.stringify(result));
      ```

13. every() 对数组中每一项运行回调函数，如果都返回 true，every 就返回 true；如果有一项返回 false，则停止遍历，此方法返回 false。

    注意：every()方法的返回值是 boolean 值，参数是回调函数。

    

    `some()`：对数组中每一个元素运行回调函数，只要有一个元素返回 true，则停止遍历，此方法返回 true。

    注意：some()方法的返回值是 boolean 值。

14. **forEach()** 遍历

    forEach()方法需要一个回调函数作为参数。回调函数有三个参数：

    * 第一，元素
    * 第二，元素的索引
    * 第三，数组

    forEach()能不能改变原数组？

    * **数组的元素是基本数据类型**：（无法改变原数组）
    * **数组的元素是引用数据类型**：（直接修改整个元素对象时，无法改变原数组）
    * **数组的元素是引用数据类型**：（修改元素对象里的某个属性时，**可以改变原数组**）

15. **map() **  返回新数组

    ```js
    //语法
    arr.map(function (item, index, arr) {
        return newItem;
    });
    ```

    对数组中每一项运行回调函数，返回该函数的结果，组成的新数组（返回的是**加工之后**的新数组）。不会改变原数组。

    注意：map方法如果是修改整个item的值，则不会改变原数组。但如果是修改 item 里面的某个属性，那就会改变原数组。

16. **filter() **  对数组进行过滤

    ```js
    //语法
    arr.filter(function (item, index, arr) {
        return true;
    });
    ```

    对数组中的**每一项**运行回调函数，该函数返回结果是 true 的项，将组成新的数组（返回值就是这个新的数组）。不会改变原数组。

    作用：对数组进行过滤。

    ```js
    let arr1 = [1, 3, 6, 2, 5, 6];
    
    let arr2 = arr1.filter((item) => {
        if (item > 4) {
            return true; // 将arr1中大于4的元素返回，组成新的数组
        }
        return false;
    });
    
    console.log(JSON.stringify(arr1)); // 打印结果：[1,3,6,2,5,6]
    console.log(JSON.stringify(arr2)); // 打印结果：[6,5,6]
    ```

17. **reduce()**

    ```js
    //语法
    arr.reduce(function (previousValue, currentValue, currentIndex, arr) {}, initialValue);
    /*
    previousValue：必填，上一次调用回调函数时的返回值
    
    currentValue：必填，当前正在处理的数组元素
    
    currentIndex：选填，当前正在处理的数组元素下标
    
    arr：选填，调用 reduce()方法的数组
    
    initialValue：选填，可选的初始值（作为第一次调用回调函数时传给 previousValue 的值）
    */
    ```

    reduce() 方法接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算为一个值。返回值是回调函数累计处理的结果。

    在以往的数组方法中，匿名的回调函数里是传三个参数：item、index、arr。但是在 reduce() 方法中，前面多传了一个参数`previousValue`，这个参数的意思是上一次调用回调函数时的返回值。第一次执行回调函数时，previousValue 没有值怎么办？可以用 initialValue 参数传给它。

    ```js
    
    const arr = [2, 0, 1, 9, 6];
    // 数组求和
    const total = arr.reduce((prev, item) => {
        return prev + item;
    });
    
    console.log('total:' + total); // 打印结果：18
    ```

    ```js
    // 定义方法：统一 value 这个元素在数组 arr 中出现的次数
    function repeatCount(arr, value) {
        if (!arr || arr.length == 0) return 0;
    
        return arr.reduce((totalCount, item) => {
            totalCount += item == value ? 1 : 0;
            return totalCount;
        }, 0);
    }
    
    let arr1 = [1, 2, 6, 5, 6, 1, 6];
    
    console.log(repeatCount(arr1, 6)); // 打印结果：3
    ```

    ```js
    const arr = [2, 0, 1, 9, 6];
    // 数组求最大值
    const maxValue = arr.reduce((prev, item) => {
        return prev > item ? prev : item;
    });
    
    console.log(maxValue); // 打印结果：9
    ```

    

